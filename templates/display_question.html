<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title><View answers></title>
               <style>
        table, th, td {
            border: 1px solid blueviolet;
            border-collapse: collapse;
        }

        table {
            width: 100%;
        }
    </style>
    </head>
    <body>
        <h2> {{ question.title }} </h2>
        <p> </p>
        <p> {{ question.message }}<br></p>

        <p>{% if question.image == 'images/' or question.image == None or question.image == '' %}

        {% else %}
            <td></td>
            <td><img src="{{ url_for('static', filename=question.image) }}" alt='{{ question.image }}' width="200" ></td>
            </p>
        {% endif %} <br>
        <table style="width:70%">

                {% for data in answers %}
                    <tr>
                        <td> {{ data.message }}
                            <button> <a href="{{ url_for('add_comment_to_answer', answer_id=data.id) }}">Add new comment</a> </button><br>
                        </td>
                        {% for commentdata in answers_comment %}
                            {% if commentdata.answer_id == data.id %}
                            <tr><td>{{ commentdata.message }}</td></tr>

                            {% endif %}
                        {% endfor %}

                    {% if data['image'] == 'images/' or data.image == None or data.image == '' %}
                        <td></td>
                    {% else %}
                        <td><img src="{{ url_for('static', filename=data.image) }}" alt='{{ data.image }}' width="100" ></td>
                    {% endif %}
                    </tr>
                    <tr><td> {{ data.submission_time.strftime("%d-%m-%Y %H:%M") }}</td>
                        <td> {{ data.vote_number }}
                        <td>
                            <a href="/answer/{{ data.id }}/vote-up">
                                <button type="button">↑</button>
                            </a>
                            <a href="/answer/{{ data.id }}/vote-down">
                                <button type="button">↓</button>
                            </a>
                        </td>

                        <td><form action={{ url_for( 'delete_answer', answer_id = data.id) }} method = 'POST'>
                            <button type='submit' class="delete-btn">Delete</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
                <tr>
                    <td>
                        <a href="/question/{{ question.id }}/new-answer">
                            <button type="button">Post answer</button>
                        </a>
                    </td>
                </tr>
            </table><br><br>
        <p><a href="/question/{{ question.id }}/edit">
                    <button type="button">Edit</button>
                </a></p>

        <h3>Answers</h3>
        <h3>Comment section</h3>
        {#Ide megy majd a comment tabla#}
        <table>
        <th>Message</th>
        <th>Time</th>
        <th>Edited count</th>

        {% for comment in comments %}
        <div>
            <tr>
                <td>{{ comment.message }}</td>
                <td>{{ comment.comment_submission_time }}</td>
                <td>{{ comment.edited_count }}</td>
            <tr>
         {% endfor %}
        </div>
        </table>
        <button> <a href="{{ url_for('add_comment', question_id=question.id) }}">Add new comment</a> </button><br>
        <button> <a href="{{ url_for('display_questions') }}">Back to list of questions</a> </button><br>
    </body>
</html>
